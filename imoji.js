// emoji.js
// 상품명을 정규화해 항상 같은 이모지가 나오게 하는 유틸

// 1) 자주 쓰는 별칭 → 기준어로 통일
const ALIASES = {
  '샤인머스켓': '포도',
  '캠벨포도': '포도',
  '거봉': '포도',
  '방울토마토': '토마토',
  '천도복숭아': '복숭아',
  '씨없는수박': '수박',
  '참외': '멜론',        // 이모지 🍈로 통일
  '애호박': '호박',
  '쌈채소': '상추',
  '쪽파': '대파',
  '느타리': '버섯',
  '느타리버섯': '버섯',
  '새송이': '버섯',
  '새송이버섯': '버섯',
  '달걀': '계란',
};

// 2) 기준어 → 이모지 매핑(직접 매칭)
const MAP = {
  // 과일
  '딸기':'🍓','레몬':'🍋','바나나':'🍌','사과':'🍎','배':'🍐','복숭아':'🍑','자두':'🟣',
  '수박':'🍉','오렌지':'🍊','포도':'🍇','멜론':'🍈','키위':'🥝','토마토':'🍅','체리':'🍒',
  '망고':'🥭','파인애플':'🍍','블루베리':'🫐','귤':'🍊','홍시':'🟠','곶감':'🟧',
  // 채소/곡물/양념
  '배추':'🥬','상추':'🥬','깻잎':'🥬','시금치':'🥬','양배추':'🥬','오이':'🥒','호박':'🎃',
  '감자':'🥔','고구마':'🍠','양파':'🧅','마늘':'🧄','대파':'🧅','당근':'🥕','버섯':'🍄',
  '부추':'🌿','고추':'🌶️','생강':'🫚','옥수수':'🌽','콩':'🫘','쌀':'🍚','백미':'🍚',
  '현미':'🍚','잡곡':'🌾','보리':'🌾','율무':'🌾','깨':'🧂','볶은깨':'🧂','참깨':'🧂',
  // 해산물/건어물
  '김':'🍘','다시마':'🌿','미역':'🌿','멸치':'🐟','갈치':'🐟','고등어':'🐟','오징어':'🦑',
  '한치':'🦑','낙지':'🐙','문어':'🐙','주꾸미':'🐙','조개':'🦪','전복':'🐚','굴비':'🐟',
  '명태':'🐟','황태':'🐟','코다리':'🐟','대구':'🐟','연어':'🍣','회':'🍣','쥐포':'🐟',
  // 장/젓/반찬
  '게장':'🦀','새우장':'🍤','새우젓':'🍤','젓갈':'🧂','명란젓':'🧂','오징어젓':'🦑',
  '낙지젓':'🐙','창난젓':'🐟','갈치속젓':'🐟','어리굴젓':'🦪',
  '김치':'🥬','깍두기':'🥬','동치미':'🥬','겉절이':'🥬','총각김치':'🥬','파김치':'🥬',
  '갓김치':'🥬','장아찌':'🥒','나물':'🌿','볶음':'🍳','조림':'🍳','잡채':'🍝',
  // 육류/식사
  '떡갈비':'🍖','돼지갈비':'🍖','소갈비':'🍖','삼겹살':'🥩','목살':'🥩','등심':'🥩','안심':'🥩',
  '갈비살':'🥩','살치살':'🥩','항정살':'🥩','가브리살':'🥩','소고기':'🥩','돼지고기':'🥩',
  '닭':'🍗','닭갈비':'🍗','닭강정':'🍗','만두':'🥟','순대국':'🍲','감자탕':'🍲','뼈해장국':'🍲',
  '국밥':'🍲','된장찌개':'🍲','청국장':'🍲','육개장':'🍲','비빔밥':'🍚',
  '막국수':'🍜','냉면':'🍜','칼국수':'🍜','잔치국수':'🍜','콩국수':'🍜','면':'🍜',
  // 제과/간식/음료
  '빵':'🍞','식빵':'🍞','모닝빵':'🥐','크루아상':'🥐','베이글':'🥯','도넛':'🍩','꽈배기':'🍩',
  '찐빵':'🥮','술빵':'🥮','카스텔라':'🍰','케이크':'🎂','쿠키':'🍪',
  '두부':'🍱','계란':'🥚','꿀':'🍯','참기름':'🫙','들기름':'🫙','콩기름':'🫙','고춧가루':'🌶️',
  '전통차':'🍵','유자차':'🍵','생강차':'🍵','오미자차':'🍵','대추차':'🍵',
};

// 3) 키워드 포함 시 후순위 기본값(직접 매칭 실패 시)
const KEYWORDS = [
  ['김치','🥬'], ['장아찌','🥒'], ['국','🍲'], ['찌개','🍲'], ['탕','🍲'],
  ['면','🍜'], ['빵','🍞'], ['젓','🧂'], ['장','🫙'], ['회','🍣'],
  ['과일','🍎'], ['채소','🥬'],
];

// 공백/기호 제거, 소문자화
function normalize(s='') {
  return s.toString().trim().toLowerCase().replace(/\s+/g,'').replace(/[()\/\-]/g,'');
}

export function getEmojiForProduct(rawName) {
  if (!rawName) return '🛍️';
  let key = normalize(rawName);
  if (ALIASES[key]) key = ALIASES[key];
  if (MAP[key]) return MAP[key];
  for (const [kw, emoji] of KEYWORDS) if (key.includes(kw)) return emoji;
  return '🛍️'; // 최종 기본값
}
