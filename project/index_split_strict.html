<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>청냠리 | 최종 MVP 데모</title>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Phosphor Icons -->
<script src="https://unpkg.com/@phosphor-icons/web"></script>
<!-- QRCode.js for generating QR codes -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<link href="./src/styles-1.css" rel="stylesheet"/>
</head>
<body class="bg-gray-100 flex justify-center">
<div class="max-w-lg w-full bg-white vh-safe shadow-2xl relative" id="appContainer">
<!-- ==================== HOME SCREEN ==================== -->
<div class="screen active" id="homeScreen">
<header class="p-4 sticky top-0 bg-white z-10 shadow-sm">
<div class="flex justify-between items-center mb-4">
<h1 class="text-2xl font-bold">
<span class="logo-gradient">청냠리</span>
</h1>
<div class="flex items-center space-x-4 text-gray-600">
<button onclick="showScreen('searchScreen')"><i class="ph ph-magnifying-glass text-2xl"></i></button>
<button class="relative" onclick="showNotificationModal()">
<i class="ph ph-bell text-2xl"></i>
<span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full hidden" id="notification-dot"></span>
</button>
<!-- 수정: 장바구니 아이콘 래퍼 및 카운트 추가 -->
<button class="relative" onclick="showCartModal()">
<i class="ph ph-shopping-cart text-2xl"></i>
<span class="absolute -top-1 -right-2 bg-indigo-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden" id="cart-item-count">0</span>
</button>
</div>
</div>
<div class="relative w-full pl-4 pr-4 py-3 bg-gray-100 border-transparent rounded-lg cursor-pointer flex items-center text-gray-500" onclick="showScreen('searchScreen')">
<i class="ph ph-magnifying-glass text-xl mr-2"></i>
<span>가게 이름이나 상품을 검색해보세요!</span>
</div>
</header>
<!-- Main Navigation -->
<nav class="p-4 grid grid-cols-4 gap-4 text-center">
<button class="nav-button flex flex-col items-center justify-center space-y-2 p-2 rounded-lg hover:bg-indigo-50 transition-colors" onclick="showScreen('mapScreen')">
<div class="nav-icon w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center">
<i class="ph ph-map-trifold text-3xl text-indigo-600"></i>
</div>
<span class="font-semibold text-gray-700 text-sm">시장 지도</span>
</button>
<button class="nav-button flex flex-col items-center justify-center space-y-2 p-2 rounded-lg hover:bg-orange-50 transition-colors" onclick="showScreen('categoryListScreen', 'all')">
<div class="nav-icon w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center"><i class="ph ph-storefront text-3xl text-orange-600"></i></div>
<span class="font-semibold text-gray-700 text-sm">가게/상품</span>
</button>
<button class="nav-button flex flex-col items-center justify-center space-y-2 p-2 rounded-lg hover:bg-teal-50 transition-colors" onclick="showScreen('pickupScreen')">
<div class="nav-icon w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center"><i class="ph ph-qr-code text-3xl text-teal-600"></i></div>
<span class="font-semibold text-gray-700 text-sm">픽업 주문</span>
</button>
<button class="nav-button flex flex-col items-center justify-center space-y-2 p-2 rounded-lg hover:bg-sky-50 transition-colors" onclick="showScreen('smartShoppingScreen')">
<div class="nav-icon w-16 h-16 bg-sky-100 rounded-full flex items-center justify-center"><i class="ph ph-chats-circle text-3xl text-sky-600"></i></div>
<span class="font-semibold text-gray-700 text-sm">스마트 장보기</span>
</button>
</nav>
<hr class="my-2 border-gray-100 border-4"/>
<!-- Category Section -->
<section class="p-4">
<h2 class="text-lg font-bold text-gray-800 mb-4">어떤 종류를 찾으세요?</h2>
<div class="grid grid-cols-5 gap-4 text-center" id="category-shortcut-container">
<!-- 카테고리 바로가기는 스크립트에서 동적으로 생성됩니다 -->
</div>
</section>
</div>
<!-- ==================== SEARCH SCREEN ==================== -->
<div class="screen" id="searchScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center">
<button class="p-2 mr-2" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<div class="relative flex-1">
<input class="w-full pl-10 pr-4 py-3 bg-gray-100 border-transparent rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" id="searchInput" placeholder="가게 이름이나 상품을 검색해보세요!" type="text"/>
<i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xl"></i>
</div>
</div>
</header>
<main class="p-4 space-y-4" id="searchResultsContainer"></main>
</div>
<!-- ==================== CATEGORY LIST SCREEN ==================== -->
<div class="screen" id="categoryListScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center">
<button class="p-2 mr-2" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800" id="categoryTitle"></h1>
</div>
</header>
<div class="p-4 flex items-center space-x-2 border-b overflow-x-auto">
<i class="ph ph-faders-horizontal text-xl text-gray-600"></i>
<button class="category-sort-btn px-4 py-2 text-sm font-semibold border rounded-full filter-active whitespace-nowrap" data-sort="default">기본 순</button>
<button class="category-sort-btn px-4 py-2 text-sm font-semibold border rounded-full whitespace-nowrap" data-sort="orders">주문 많은 순</button>
<button class="category-sort-btn px-4 py-2 text-sm font-semibold border rounded-full whitespace-nowrap" data-sort="rating">별점 높은 순</button>
</div>
<main class="p-4 space-y-4" id="categoryStoreListContainer"></main>
</div>
<!-- ==================== STORE DETAIL SCREEN ==================== -->
<div class="screen" id="storeDetailScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center">
<button class="p-2 mr-2" id="backToCategoryBtn"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800 flex-1" id="storeDetailTitle"></h1>
<div class="ml-auto" id="favoriteButtonsContainer"></div>
</div>
</header>
<main class="p-4">
<div class="mb-6" id="storeDetailInfo"></div>
<hr/>
<h2 class="text-lg font-bold text-gray-800 my-4">상품 목록</h2>
<div class="space-y-4" id="storeProductListContainer"></div>
<hr/>
<h2 class="text-lg font-bold text-gray-800 my-4">방문자 리뷰</h2>
<div class="space-y-4" id="storeReviewsContainer"></div>
</main>
</div>
<!-- ==================== SMART SHOPPING SCREEN ==================== -->
<div class="screen" id="smartShoppingScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center mb-4">
<button class="p-2 mr-2" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800">스마트 장보기</h1>
</div>
<div class="relative">
<input class="w-full pl-10 pr-4 py-3 bg-gray-100 border-transparent rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" id="smartSearchInput" placeholder="예: 고등어, 삼겹살, 김치" type="text"/>
<i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xl"></i>
</div>
</header>
<main class="p-4">
<div class="mb-6" id="myRecipesContainer">
<div class="flex justify-between items-center mb-2">
<h2 class="text-lg font-bold text-gray-800">나만의 레시피</h2>
<button class="text-sm bg-indigo-100 text-indigo-700 font-semibold px-3 py-1 rounded-lg" onclick="showRecipeModal()">+ 새 레시피 추가</button>
</div>
<div class="space-y-2" id="myRecipesList"></div>
</div>
<hr class="my-4"/>
<div id="smartSearchResultsContainer"></div>
</main>
</div>
<!-- ==================== RECIPE MODAL SCREEN ==================== -->
<div class="screen bg-gray-50" id="recipeModalScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center">
<button class="p-2 mr-2" onclick="showScreen('smartShoppingScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800" id="recipeModalTitle">새 레시피 추가</h1>
</div>
</header>
<main class="p-4">
<input id="recipeIdInput" type="hidden"/>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1" for="recipeNameInput">레시피 이름</label>
<input class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" id="recipeNameInput" placeholder="예: 우리집 김치찌개" type="text"/>
</div>
<h3 class="font-semibold mb-2">재료 목록</h3>
<div class="space-y-2" id="recipeIngredientsContainer">
<!-- Ingredient fields will be added here -->
</div>
<button class="w-full mt-2 text-sm text-indigo-600 font-semibold p-2 bg-indigo-50 rounded-lg hover:bg-indigo-100" id="addIngredientBtn">
                    + 재료 추가하기
                </button>
<div class="mt-8 flex space-x-2">
<button class="w-full px-4 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 hidden" id="deleteRecipeBtn">삭제</button>
<button class="w-full px-4 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700" id="saveRecipeBtn">저장하기</button>
</div>
</main>
</div>
<!-- ==================== PICKUP ORDER SCREEN (QR CODES) ==================== -->
<div class="screen" id="pickupScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center">
<button class="p-2 mr-2" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800">픽업 주문 확인</h1>
</div>
</header>
<main class="p-6"></main>
</div>
<!-- ==================== MY ORDERS SCREEN (HISTORY) ==================== -->
<div class="screen" id="myOrdersScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center relative">
<button class="p-2 absolute left-0" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800 text-center flex-1">주문 내역</h1>
</div>
</header>
<main class="p-4 space-y-4"></main>
</div>
<!-- ==================== RECENTLY VIEWED & FAVORITES SCREENS ==================== -->
<div class="screen" id="recentStoresScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center relative">
<button class="p-2 absolute left-0" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800 text-center flex-1">최근 본 가게</h1>
</div>
</header>
<main class="p-4 space-y-4"></main>
</div>
<div class="screen" id="favoritesScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center relative">
<button class="p-2 absolute left-0" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800 text-center flex-1">관심 가게</h1>
</div>
</header>
<main class="p-4 space-y-4"></main>
</div>
<!-- ==================== MARKET MAP SCREEN (iframe) ==================== -->
<div class="screen" id="mapScreen">
<header class="p-4 sticky top-0 bg-white z-10 border-b">
<div class="flex items-center">
<button class="p-2 mr-2" onclick="showScreen('homeScreen')"><i class="ph ph-arrow-left text-2xl"></i></button>
<h1 class="text-xl font-bold text-gray-800">시장 지도</h1>
<div class="ml-auto flex items-center gap-2">
<button class="px-3 py-1.5 rounded-md border text-sm text-gray-700 hover:bg-gray-50" onclick="showPromptBox('URL 설정', '시장 지도 URL을 입력하세요', setMarketMapUrl)">URL 설정</button>
<a class="px-3 py-1.5 rounded-md bg-indigo-600 text-white text-sm hover:bg-indigo-700" id="openMapNewTab" rel="noopener" target="_blank">새 탭</a>
</div>
</div>
</header>
<div class="p-6 flex items-center justify-center text-gray-500" id="mapLoading">
<i class="ph ph-circle-notch animate-spin text-2xl mr-2"></i> 로딩 중…
            </div>
<iframe allowfullscreen="" class="w-full" id="marketMapFrame" referrerpolicy="no-referrer-when-downgrade" style="border:0; height: calc(100svh - 65px - 80px); display:none;" title="시장 지도"></iframe>
</div>
<!-- ==================== MODAL CONTAINER ==================== -->
<div id="modalContainer"></div>
<!-- NEW: Toast Notification Container -->
<div class="fixed bottom-24 left-1/2 -translate-x-1/2 z-[101] space-y-2 w-full max-w-lg px-4" id="toast-container"></div>
<!-- ==================== KAKAO FAB ==================== -->
<a class="fab-kakao" href="https://pf.kakao.com/_xgGdxmn" target="_blank">
<span class="fab-kakao-text">TALK</span>
</a>
<!-- ==================== BOTTOM NAVIGATION ==================== -->
<!-- 수정: grid-cols-5로 변경 및 장바구니 버튼 추가 -->
<footer class="bottom-nav fixed bottom-0 left-1/2 -translate-x-1/2 max-w-lg w-full grid grid-cols-5 text-center bg-white border-t border-gray-200 z-20">
<button class="nav-btn p-4 flex flex-col items-center justify-center text-gray-500" onclick="showCartModal()">
<i class="ph ph-shopping-cart text-2xl"></i>
<span class="text-xs mt-1">장바구니</span>
</button>
<button class="nav-btn p-4 flex flex-col items-center justify-center text-gray-500" data-screen="recentStoresScreen">
<i class="ph ph-clock-counter-clockwise text-2xl"></i>
<span class="text-xs mt-1">최근 본 가게</span>
</button>
<button class="nav-btn p-4 flex flex-col items-center justify-center text-gray-500 active" data-screen="homeScreen">
<i class="ph ph-house text-2xl"></i>
<span class="text-xs mt-1">홈</span>
</button>
<button class="nav-btn p-4 flex flex-col items-center justify-center text-gray-500" data-screen="favoritesScreen">
<i class="ph ph-heart text-2xl"></i>
<span class="text-xs mt-1">관심 가게</span>
</button>
<button class="nav-btn p-4 flex flex-col items-center justify-center text-gray-500" data-screen="myOrdersScreen">
<i class="ph ph-receipt text-2xl"></i>
<span class="text-xs mt-1">내 주문</span>
</button>
</footer>
</div>
<script src="./src/app-1.js"></script>
</body>
</html>